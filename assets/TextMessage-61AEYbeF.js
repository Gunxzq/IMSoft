import{d as e,r as s,w as a,R as t,S as n,b as c,g as l,e as o,z as i,U as r}from"./vendor-jjnROqEv.js";import{e as m,E as u,a as v,C as d,_ as g}from"./index-DZvxyR4P.js";const p={class:"message-bubble"},b={key:0,class:"text-content"},x=["innerHTML"],y={key:0,class:"message-status"},M=g(e({name:"TextMessage",props:{message:{}},setup(e){const g=s(""),M=s(!0),f=e,k=s([{text:"复制",action:"click",callback:e=>{e.MessageStore.currentMessage=e.message.content,m.emit(u.API_INPUT_UPDATE,e.message.content)}},{text:"翻译",action:"click",callback:()=>{}}]);return a(()=>f.message.content,async e=>{if(e){M.value=!0;try{const s=await t.parse(e);g.value=n.sanitize(s)}catch(s){g.value=`<p style="color:red;">解析失败: ${e}</p>`}finally{M.value=!1}}},{immediate:!0}),(e,s)=>(l(),c("div",p,[o("div",{class:"message-content",onContextmenu:s[0]||(s[0]=r(e=>((e,s)=>{v.GlobalMenuStore.initItem([...d,...k.value],{...v,item:e}),s.preventDefault();try{v.GlobalMenuStore.showMenu(s.clientX,s.clientY)}catch(a){}})(f.message,e),["right","prevent","stop"]))},[M.value?(l(),c("div",b,"加载中...")):(l(),c("div",{key:1,class:"text-content",innerHTML:g.value},null,8,x))],32),e.message.isSelf?(l(),c("div",y)):i("",!0)]))}}),[["__scopeId","data-v-bd411224"]]);export{M as default};
