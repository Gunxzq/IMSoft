import{d as e,r as t,b as a,g as n,e as s,i as o,U as l,u as c,W as m,X as r,F as u}from"./vendor-DtIIXuVc.js";import{a as i,C as d,_ as p}from"./index-BD3GTcF9.js";const g=["src"],b=p(e({name:"ImageMessage",props:{message:{}},emits:["contextmenu"],setup(e,{emit:p}){let b=t(!1);const v=t([{text:"下载",action:"click",callback:e=>{const t=e.message.content;f(t,"image.png")}}]),f=(e,t,a="image/png")=>{const n=atob(e.split(",")[1]),s=new ArrayBuffer(n.length),o=new Uint8Array(s);for(let r=0;r<n.length;r++)o[r]=n.charCodeAt(r);const l=new Blob([s],{type:a}),c=URL.createObjectURL(l),m=document.createElement("a");m.href=c,m.download=t,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(c)},h=e,x=p;return(e,t)=>(n(),a(u,null,[s("div",{class:"message-bubble",onContextmenu:t[2]||(t[2]=e=>x("contextmenu",e))},[s("img",{src:h.message.content,alt:"",class:"image",onClick:t[0]||(t[0]=l(e=>m(b)?b.value=!0:b=!0,["prevent","left","stop"])),onContextmenu:t[1]||(t[1]=l(e=>((e,t)=>{i.GlobalMenuStore.initItem([...d,...v.value],{...i,message:e}),t.preventDefault();try{i.GlobalMenuStore.showMenu(t.clientX,t.clientY)}catch(a){}})(h.message,e),["right","prevent","stop"]))},null,40,g)],32),o(r,{modelValue:c(b),"onUpdate:modelValue":t[3]||(t[3]=e=>m(b)?b.value=e:b=e)},null,8,["modelValue"])],64))}}),[["__scopeId","data-v-876b3b31"]]);export{b as default};
